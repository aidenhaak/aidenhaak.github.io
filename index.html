<!doctype html><html lang=en>
<head>
<meta name=generator content="Hugo 0.93.2">
<meta name=description content="A cavalcade of sarcasm and various ramblings on tech, programming, and Oxford commas.">
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta charset=utf-8>
<title>Aiden Haak </title><link rel=preload href=./fonts/ZillaSlab-SemiBold.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/ZillaSlab-Bold.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/FiraSans-Regular.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/FiraSans-Italic.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/FiraSans-BoldItalic.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/FiraSans-Bold.ttf as=font crossorigin=anonymous>
<link rel=preload href=./fonts/FiraMono-Regular.ttf as=font crossorigin=anonymous>
<link rel=stylesheet href=./scss/main.min.2c4f01e1ed36dc6f7795b45043aa077420f08ffea1ca2c2d6a7c0637662c7fa1.css><meta property="og:title" content="Aiden Haak">
<meta property="og:description" content="A cavalcade of sarcasm and various ramblings on tech, programming, and Oxford commas.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.aidenhaak.com/">
<meta itemprop=name content="Aiden Haak">
<meta itemprop=description content="A cavalcade of sarcasm and various ramblings on tech, programming, and Oxford commas."><meta name=twitter:card content="summary">
<meta name=twitter:title content="Aiden Haak">
<meta name=twitter:description content="A cavalcade of sarcasm and various ramblings on tech, programming, and Oxford commas.">
</head><body>
<div class=footer-wrapper>
<header>
<div class=container>
<h1 class=site-title>
<a href=./>Aiden Haak</a>
</h1><nav>
<ul>
<li>
<a href=./about title="About page">
About
</a>
</li></ul></nav><ul class=social>
<li>
<a href=https://twitter.com/aidenhaak title=Twitter><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717.0-4.92 2.203-4.92 4.917.0.39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475.0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314.0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39.0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054.0 13.999-7.496 13.999-13.986.0-.209.0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
</a>
</li><li>
<a href=https://github.com/aidenhaak/ title=GitHub><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
</a>
</li><li>
<a href=./index.xml title="Atom Feed"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg>
</a>
</li></ul></div></header><div class="content container">
<main aria-role=main>
<main aria-role=main>
<article>
<h1 class=post-title><a href=./2021/01/29/setting-up-an-openttd-server-part-2/>Setting Up An OpenTTD Server Part 2</a></h2><span class=post-date>January 29, 2021</span>
<p>I found myself wanting to scratch my OpenTTD itch again but I need to setup another server as I had long ago nuked the server for <a href=https://www.aidenhaak.com/2015/11/08/setting-up-an-openttd-server/>part one</a>. Turns out that part one is (unsurprisngly) a bit out of date after five years and this time I wanted to dabble in some custom graphics or GRFs for my server.</p><p>For the first problem there is a an easy fix thanks to an <a href=https://hub.docker.com/r/bateau/openttd>OpenTTD docker image</a>. As for the custom GRFs - well you&rsquo;ll just have to keep reading.</p><p>For this guide I&rsquo;m assuming:</p><ul>
<li>That you&rsquo;re running OpenTTD locally on a Windows desktop.</li><li>You have a Google Cloud account setup and you know your way around it a bit.</li><li>The OpenTTD server will run on Ubuntu.</li></ul><h2 id=customising-the-custom-graphics>Customising the Custom Graphics</h2><p>I found the easiest way to get the graphics files setup was to do it in game via the New GRF settings</p><p>Once you are happy with your custom GRFs (making sure that they are compatible with each other!) it&rsquo;s time fire up the command prompt and run OpenTTD as a local server using the following command:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-batch data-lang=batch><span style=display:flex><span>openttd.exe -D</span></span></code></pre></div><p>This will make OpenTTD generate the config file and GRF files that our server can use. After a brief wait you can stop the OpenTTD server after it has finished generating the map and has started the game.</p><p>Next navigate to <code>C:\Users\&lt;username>\Documents\OpenTTD</code> where you should see a <code>openttd.cfg</code> file and a <code>content_download</code> folder. These are the files we will be uploading to a storage bucket. It is a good idea to double check that the new GRFs are correctly included in the config file, you should see something like the following at the end of the <code>openttd.cfg</code> file:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#00a8c8>[newgrf]</span>
</span></span><span style=display:flex><span><span style=color:#75af00>44440111|9B505....AFB0CA|uk_renewal_set.3.04\pb_ukrs.grf</span> <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span><span style=color:#75af00>F1250007|997B3....46D7EB|firs_industry_replacement_set_3-3.0.12\firs.grf</span> <span style=color:#f92672>=</span> <span style=color:#d88200>0 0 0 0 0 0 16 150 80 300</span>
</span></span><span style=display:flex><span><span style=color:#75af00>4A530117|CA321....D4A501|ecs__firs_vehicle_set-2014.11.26\efrefit.grf</span> <span style=color:#f92672>=</span> </span></span></code></pre></div><h2 id=google-cloud-setup>Google Cloud Setup</h2><p>We will be running OpenTTD on the <a href=https://cloud.google.com/free>free F1-micro instance</a> but first we have a few things to setup.</p><h3 id=storage>Storage</h3><p>Firstly create a new <a href=https://cloud.google.com/storage>Storage bucket</a> for your OpenTTD files then upload the <code>openttd.cfg</code> file and <code>content_download</code> folder from the <code>C:\Users\&lt;username>\Documents\OpenTTD</code> folder to a <code>openttd</code> folder in the bucket. Remember to edit the <code>openttd.cfg</code> file to your desired settings before uploading as this is the configuration your server will be using.</p><p>After the upload has finished the folder in your bucket should look like the following.</p><h3 id=firewall>Firewall</h3><p>We need to add a <a href=https://console.cloud.google.com/networking/firewalls/>firewall rule</a> to the <a href=https://cloud.google.com/vpc/docs/vpc>VPC network</a> the server will be running in to allow the OpenTTD traffic through. Create a firewall rule that allows TCP and UDP on your desired OpenTTD port &ndash; by default this is port 3979.</p><h3 id=putting-it-all-together>Putting It All Together</h3><p>Now it&rsquo;s time to create a new VM instance but there are a few settings that need to be configured. Firstly, make sure to use a Ubuntu image and then assign a public IP to your instance to ensure that it is reachable over the public internet.</p><p>Then copy the following bash script <em>after</em> changing the <code>OPENTTD_BUCKET_NAME</code> in the script to the same name as the bucket you created earlier in this guide.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>if</span> <span style=color:#f92672>[</span> <span style=color:#d88200>&#34;</span><span style=color:#111>$EUID</span><span style=color:#d88200>&#34;</span> -ne <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>then</span> <span style=color:#111>echo</span> <span style=color:#d88200>&#34;Please run as root&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#111>exit</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Use the same bucket name from earlier in the guide here.</span>
</span></span><span style=display:flex><span><span style=color:#111>OPENTTD_BUCKET_NAME</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;bucketname&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install some prerequisites.</span>
</span></span><span style=display:flex><span>apt-get update -y
</span></span><span style=display:flex><span>apt-get install -y <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    apt-transport-https <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    ca-certificates <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    curl <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    gnupg-agent <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    software-properties-common
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Next steps copy pasted from: https://docs.docker.com/engine/install/ubuntu/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add Docker‚Äôs official GPG key</span>
</span></span><span style=display:flex><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span style=color:#111>|</span> apt-key add -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add the Docker repository.</span>
</span></span><span style=display:flex><span>add-apt-repository <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>   <span style=color:#d88200>&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#d88200>   </span><span style=color:#00a8c8>$(</span>lsb_release -cs<span style=color:#00a8c8>)</span><span style=color:#d88200> \
</span></span></span><span style=display:flex><span><span style=color:#d88200>   stable&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install docker</span>
</span></span><span style=display:flex><span>apt-get update -y
</span></span><span style=display:flex><span>apt-get install docker-ce docker-ce-cli -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add the openttd group and user.</span>
</span></span><span style=display:flex><span>groupadd openttd -r
</span></span><span style=display:flex><span>useradd openttd -r -g openttd,docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>OPENTTD_GROUP_ID</span><span style=color:#f92672>=</span><span style=color:#d88200>`</span>id -g openttd<span style=color:#d88200>`</span>
</span></span><span style=display:flex><span><span style=color:#111>OPENTTD_USER_ID</span><span style=color:#f92672>=</span><span style=color:#d88200>`</span>id -u openttd<span style=color:#d88200>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add firewall exceptions.</span>
</span></span><span style=display:flex><span>apt install ufw -y
</span></span><span style=display:flex><span>ufw allow <span style=color:#ae81ff>3979</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>OPENTTD_DIR</span><span style=color:#f92672>=</span><span style=color:#d88200>&#34;/etc/openttd&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Download the openttd config file and GRFs.</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#111>$OPENTTD_DIR</span>
</span></span><span style=display:flex><span>gsutil cp -r <span style=color:#d88200>&#34;gs://</span><span style=color:#111>$OPENTTD_BUCKET_NAME</span><span style=color:#d88200>/openttd&#34;</span> <span style=color:#111>$OPENTTD_DIR</span>
</span></span><span style=display:flex><span>chown openttd:openttd -R <span style=color:#111>$OPENTTD_DIR</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Finally run the container.</span>
</span></span><span style=display:flex><span>docker run --name openttd -d <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    -e <span style=color:#111>PUID</span><span style=color:#f92672>=</span><span style=color:#111>$OPENTTD_USER_ID</span> <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    -e <span style=color:#111>PGID</span><span style=color:#f92672>=</span><span style=color:#111>$OPENTTD_GROUP_ID</span> <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    -v <span style=color:#111>$OPENTTD_DIR</span>:/home/openttd/.openttd <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    -p 3979:3979/tcp <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    -p 3979:3979/udp <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>    bateau/openttd:latest</span></span></code></pre></div><p>And paste it into the start-up script section for the VM.</p><p>Now create the instance and sit back and wait for the magic to happen üßô‚Äç‚ôÇÔ∏è</p><p>Add the server IP via the in-game browser and you should be able to join!</p><h2 id=troubleshooting>Troubleshooting</h2><p>If you can&rsquo;t connect to your OpenTTD server here are a few basic steps you can try. Firstly, make sure you can ping the server via its public IP. Secondly, verify that the docker container is actually running on the server.</p><p>You can do this by running <code>docker ps -a</code> and you should see an <code>bateau/openttd</code> image in the results. If it&rsquo;s not there it&rsquo;s likely the startup script failed to run and you can try running the script manually. One easy way to do this is to upload the initialization script to the openttd bucket and run the following commands:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gsutil cp <span style=color:#d88200>&#34;gs://OPENTTD_BUCKET_NAME/init.sh&#34;</span>
</span></span><span style=display:flex><span>chmod +x init.sh
</span></span><span style=display:flex><span>sudo ./init.sh</span></span></code></pre></div><p>After the script has run check the docker container is running &ndash; if OpenTTD still isn&rsquo;t running after this the problem is left as <a href=https://abstrusegoose.com/395>an exercise for reader</a>.</p><h2 id=next-steps>Next Steps</h2><p>Some next steps to consider for your server:</p><ul>
<li>Add a domain for your server.</li><li>Add cron job to upload save games to storage bucket so you can relive your greatest maps!</li></ul></article><article>
<h1 class=post-title><a href=./2019/06/29/moving-to-hugo/>Moving To Hugo</a></h2><span class=post-date>June 29, 2019</span>
<p>I have just put the finishing touches on this site&rsquo;s second migration &ndash; this time from <a href=http://jekyllrb.com/>Jekyll</a> to <a href=https://gohugo.io/>Hugo</a>. I&rsquo;d been planning on doing this migration for a while but the lack of SCSS/SASS support was holding me back. Then in August 2019 <a href=https://gohugo.io/news/0.43-relnotes/>Hugo 0.43 happened</a> and with it the introduction of Hugo Pipes and SCSS/SASS. So there was nothing holding me back (except for a lack of free time of course).</p><p>The main motivation for this change is two-fold:</p><ul>
<li>I remove my dependencies on a bunch of random ruby gems</li><li>Having a binary file to do the HTML generation is really nice, no setting up a Ruby or Python environment just make sure the Hugo executable is on the path and it&rsquo;s good to go.</li></ul><p>Which means reduced maintenance for keep my theme building and hopefully at least a small increase in my blogging and to start planning yet another migration to the blog platform <em>du jour</em> (probably <a href=https://www.gatsbyjs.org/>Gatsby</a>).</p></article><article>
<h1 class=post-title><a href=./2016/07/16/openvpn-and-iptables/>OpenVPN and Iptables</a></h2><span class=post-date>July 16, 2016</span>
<p>I recently setup an <a href=https://openvpn.net/>OpenVPN</a> server, I mostly followed the <a href=https://www.digitalocean.com/community/tutorials/how-to-set-up-an-openvpn-server-on-ubuntu-14-04>fantastic Digital Ocean (DO) guide</a>, however I ended up using <a href=https://en.wikipedia.org/wiki/Iptables>iptables</a> instead of <a href=https://help.ubuntu.com/community/UFW>ufw</a>. Since setting up my iptables configuration correctly was probably the one thing that gave me the most trouble I thought I&rsquo;d share.</p><p>I setup OpenVPN using a TUN adapter for my OpenVPN server because 1: that&rsquo;s what the DO guide does and 2: I don&rsquo;t plan to do any bridging. However, if you are using a TAP adapter you can read more about it on the <a href=https://community.openvpn.net/openvpn/wiki/BridgingAndRouting>OpenVPN website</a>.</p><p>The iptables rules file I ended up using looked something like the following.</p><pre tabindex=0><code class=language-kernel-config data-lang=kernel-config>*filter

# Allow all loopback (lo0) traffic and reject traffic
# to localhost that does not originate from lo0.
-A INPUT -i lo -j ACCEPT
-A INPUT ! -i lo -s 127.0.0.0/8 -j REJECT

# Allow ping.
-A INPUT -p icmp -m conntrack --ctstate NEW --icmp-type 8 -j ACCEPT

# Allow SSH connections.
-A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW -j ACCEPT

# Allow OpenVPN connections.
-A INPUT -p udp --dport 1194 -m conntrack --ctstate NEW -j ACCEPT

# Allow inbound traffic from established connections.
# This includes ICMP error returns.
-A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

# Reject all other inbound.
-A INPUT -j REJECT

# Allow traffic initiated from VPN to access LAN.
-A FORWARD -i tun0 -o eth0 -s 10.8.0.0/24 -d 10.0.0.4/24 -m conntrack --ctstate NEW -j ACCEPT

# Allow established traffic to pass back and forth.
-A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

# Drop invalid packets.
-A INPUT -m conntrack --ctstate INVALID -j DROP

COMMIT

*nat

# Masquerade all traffic from VPN clients.
-A POSTROUTING -o eth0 -s 10.8.0.0/24 -j MASQUERADE

COMMIT</code></pre><p>There&rsquo;s a few basic non-OpenVPN related items in there - e.g. allow SSH, ping, but overall it&rsquo;s a pretty barebones iptables configuration since I plan to just run OpenVPN on this server. Also note that this only for IPv4 traffic and NOT IPv6.</p><p>Finally, to load the rules so that your server is using them it&rsquo;s a matter of running a simple one line command.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables-restore openvpniptable.rules</span></span></code></pre></div><p>And that&rsquo;s it! Assuming you followed the rest of the DO guide you should now have a shiny new OpenVPN server using iptables up and running. Happy VPNing.</p></article><article>
<h1 class=post-title><a href=./2015/11/08/setting-up-an-openttd-server/>Setting Up An OpenTTD Server</a></h2><span class=post-date>November 8, 2015</span>
<p><em>Update: Check out <a href=https://www.aidenhaak.com/2021/01/29/setting-up-an-openttd-server-part-2/>part two</a> for a more up to date guide.</em></p><p>I recently setup an <a href=https://www.openttd.org/en/>OpenTTD</a> server and I thought I might document the steps I took to do so.</p><p>I choose to use a <a href=https://www.digitalocean.com/>Digital Ocean</a> (DO) to host my server since I&rsquo;ve been wanting to try them out for some time. It also helps that their cheapest hosting option is rather cheap - only $5 per month. And since I don&rsquo;t think OpenTTD will be particularily memory intensive I am fairly certain that the extra 512MB of RAM for the $10 per month DO droplet will be needed.</p><p>After creating my $5 per month droplet running <em>Ubuntu 14.04 LTS</em> I followed DO&rsquo;s handy <a href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-14-04>initial server setup</a> to get my server ready for installing OpenTTD.</p><h2 id=installing-openttd>Installing OpenTTD</h2><p>The first step to installing OpenTTD is downloading it:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://binaries.openttd.org/releases/1.5.2/openttd-1.5.2-linux-ubuntu-trusty-amd64.deb</span></span></code></pre></div><p>Then to install OpenTTD and it&rsquo;s dependencies:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dpkg -i openttd-1.5.2-linux-ubuntu-trusty-amd64.deb
</span></span><span style=display:flex><span>sudo apt-get -f install</span></span></code></pre></div><h2 id=installing-graphics>Installing Graphics</h2><p>Before you can kick off your OpenTTD server you need to install some graphics. If you don&rsquo;t have your original Transport Tycoon Deluxe CDs handy the bare minimum for this is to download <a href=http://dev.openttdcoop.org/projects/opengfx>OpenGFX</a> which provides free replacements for the game&rsquo;s graphics. To install it:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://binaries.openttd.org/extra/opengfx/0.5.2/opengfx-0.5.2-all.zip
</span></span><span style=display:flex><span>unzip opengfx-0.5.2-all.zip
</span></span><span style=display:flex><span>tar -xvf opengfx-0.5.2.tar
</span></span><span style=display:flex><span>mv opengfx-0.5.2 ~/.openttd/baseset</span></span></code></pre></div><h2 id=adding-an-openttd-service>Adding An OpenTTD Service</h2><p>With OpenTTD installed one of the last steps is to setup an OpenTTD service. Luckily for us, <a href=https://bitbucket.org/frodus/>Frodus</a> has kindly created an OpenTTD init script <a href=https://bitbucket.org/frodus/openttd-init/wiki/Home>available here</a>.</p><p>First we need to download and unzip it:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://bitbucket.org/frodus/openttd-init/downloads/openttd-init-1.1.1.zip
</span></span><span style=display:flex><span>unzip openttd-init-1.1.1.zip -d openttd-init</span></span></code></pre></div><p>Then we need to add a symlink of the openttd file to <code>/etc/init.d</code>, update its permissions and add the OpenTTD service to the Ubuntu startup scripts.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s ~/openttd-init/openttd /etc/init.d/openttd
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>755</span>  ~/openttd-init/openttd
</span></span><span style=display:flex><span>sudo update-rc.d openttd defaults</span></span></code></pre></div><p>Finally rename <code>~/openttd-init/config.example</code> to <code>config</code> and edit the variables to suitable values.</p><h2 id=openttd-configuration>OpenTTD Configuration</h2><p>The last step before starting to play is setting up the <code>openttd.cfg</code> file - a list of the available options is on the <a href=https://wiki.openttd.org/Openttd.cfg>OpenTTD wiki</a>. A good overview of what options to change is also available on the <a href=https://wiki.openttdcoop.org/Map_Preparation>OpenTTD Coop Wiki</a>.</p><p>One setting of great importance is the <code>sever_port</code> (default value 3979) setting. Whatever option you choose, make sure to add a firewall rule. If you are using the default Ubuntu firewall <code>ufw</code> it is as simple as:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ufw allow 3979/tcp
</span></span><span style=display:flex><span>sudo ufw reload</span></span></code></pre></div><p><code>iptables</code> configuration is left as an exercise to the reader.</p><p>Some of the other settings I like to change are:</p><ul>
<li><a href=https://wiki.openttd.org/Min_active_clients><code>min_active_clients</code></a> set this to 1 so the game is paused when noone is connected.</li><li><a href=https://wiki.openttd.org/Inflation><code>inflation</code></a> set this to false since after a while money is no object.</li><li><a href=https://wiki.openttd.org/Forbid_90_deg><code>forbid_90_deg</code></a> set this to false as 90 degree turns are ugly.</li><li><a href=https://wiki.openttd.org/Train_acceleration_model><code>train_acceleration_model</code></a> set this to realistic otherwise slopes will seriously slow your trains down.</li><li><a href=https://wiki.openttd.org/Vehicle_breakdowns><code>vehicle_breakdowns</code></a> breakdowns are annoying so no breakdowns please.</li><li><a href=https://wiki.openttd.org/No_servicing_if_no_breakdowns><code>no_servicing_if_no_breakdowns</code></a> no servicing when there are no breakdowns.</li></ul><h2 id=joining-your-server>Joining Your Server</h2><p>Once you have setup your config it&rsquo;s finally time to fire up your OpenTTD server:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo service openttd start</span></span></code></pre></div><p>To join your server in the Multiplayer settings window click the <em>Add Server</em> button and add your server with the port number like so:</p><p>And after joining you should be greeted with your shiny new OpenTTD game. Happy network building!</p></article><article>
<h1 class=post-title><a href=./2015/06/14/leap-second/>Leap Second</a></h2><span class=post-date>June 14, 2015</span>
<p>The next <a href=https://en.wikipedia.org/wiki/Leap_second>leap second</a> is almost upon us! It is due to be added at the end of this month when at midnight June 30 2015 the clocks will be wound forward by one second. This occasional adjustement is to keep <a href=https://en.wikipedia.org/wiki/Coordinated_Universal_Time>Coordinated Universal Time (UTC)</a> within an acceptable margin of error (approximately 0.9s) of Earth&rsquo;s rotational time AKA <a href=https://en.wikipedia.org/wiki/Solar_time#Mean_solar_time>mean solar time</a>.</p><p>As harmless as this sounds it is very much the opposite given the rise of computing applications requiring very precise time keeping, financial and scientific applications in particular. This <em>&ldquo;harmlessness</em>&rdquo; was clearly demonstrated by the wide-spread commotion caused by the <a href=http://www.somebits.com/weblog/tech/bad/leap-second-2012.html>previouse leap second</a>.</p><p>It gets even more complex when you consider that that the Earth is constantly <a href=http://eclipse.gsfc.nasa.gov/SEcat5/secular.html>decelerating</a> due to the gravitional tug of the moon. Which is currently adding about <a href=http://www.usno.navy.mil/USNO/time/master-clock/leap-seconds>1.4ms per day per century</a> and whilst slow this affect will compound over time until a <a href=https://en.wikipedia.org/wiki/Timeline_of_the_far_future>leap second will be needed every day</a>!</p><p>More complexity is introduced when telling time due to the implicit assumption it <a href=http://naggum.no/lugm-time.html>includes information about the event in time and as well as it&rsquo;s location</a>. As evidenced by the numerous time-zones and daylight saving shenanigans around the worldd. On top of this, there is also the affect that politics can have on time which can result in a country anywhere from <a href="http://www.timeanddate.com/time/change/singapore/singapore?year=1905">3 minutes</a> to <a href=http://www.nytimes.com/2011/12/30/world/asia/samoa-to-skip-friday-and-switch-time-zones.html>a whole day</a>.</p><p>Who would have guessed something as boring as time could be so <a href=http://web.archive.org/web/20160315205708/http://catless.ncl.ac.uk/Risks/24.80.html#subj12>hard</a>?</p></article><nav aria-label="page navigation">
<ul class=pagination>
<li class="page-item active">1</li><li class=page-item><a href=./page/2/ class=page-link>2</a></li><li class=page-item><a href=./page/3/ class=page-link>3</a></li><li class="page-item disabled">...</li><li class=page-item><a href=./page/2/ rel=next class=page-link>Next ‚Ä∫</a></li><li class=page-item><a href=./page/4/ rel=last class=page-link>Last ¬ª</a></li></ul></nav></main></main><div class=footer-push></div></div></div><footer>
<div class=container>
<p class=copyright>¬© 2013-2022 Aiden Haak ‚Äì Powered by <a href=https://gohugo.io/>Hugo</a></p></div></footer></body></html>